<div class="order-summary-container" *ngIf="!isLoading && order; else loading">
  <h2 class="summary-title">Order Summary</h2>

  <div class="section order-details">
    <p><strong>Order Number:</strong> #{{ order.id }}</p>
    <p><strong>Order Date:</strong> {{ order.orderDate | date: 'mediumDate' }}</p>
    <p><strong>Status:</strong> {{ order.status || 'Processing' }}</p>
    <p><strong>Payment Method:</strong> {{ order.paymentMethod || 'Online Payment' }}</p>
  </div>

  <h3 class="section-title">Shipping Information</h3>
  <div class="section shipping-details">
    <p><strong>Delivery Address:</strong> {{ order.address }}</p>
  </div>

  <h3 class="section-title">Items</h3>
  <div class="section items-table-wrapper">
    <table class="order-items">
      <thead>
        <tr>
          <th>Product</th>
          <th>Unit Price</th>
          <th>Quantity</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of order.items">
          <td>{{ item.name }}</td>
          <td>‚Çπ{{ item.price.toFixed(2) }}</td>
          <td>{{ item.quantity }}</td>
          <td>‚Çπ{{ (item.price * item.quantity).toFixed(2) }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="order-total section">
    <p><strong>Subtotal:</strong> ‚Çπ{{ order.subtotal?.toFixed(2) || 'N/A' }}</p>
    <p><strong>Shipping:</strong> ‚Çπ{{ order.shippingFee?.toFixed(2) || '0.00' }}</p>
    <p><strong>Tax:</strong> ‚Çπ{{ order.tax?.toFixed(2) || '0.00' }}</p>
    <hr />
    <p class="total"><strong>Total:</strong> ‚Çπ{{ order.totalAmount?.toFixed(2) }}</p>
  </div>

  <p><strong>Shipping Status:</strong> {{ order.shippingStatus }}</p>
  <div class="progress-bar">
    <p *ngIf="order.shippingStatus === 'Out for Delivery'">
      üì¶ Your package is out for delivery! Expect it soon.
    </p>

    <span [class.active]="order.shippingStatus === 'Initialized'">‚óè Initialized</span>
    <span [class.active]="order.shippingStatus === 'In Transit'">‚Üí In Transit</span>
    <span [class.active]="order.shippingStatus === 'Out for Delivery'">‚Üí Out for Delivery</span>
    <span [class.active]="order.shippingStatus === 'Delivered'">‚úì Delivered</span>
  </div>
</div>

<ng-template #loading>
  <p class="loading-text">Loading order summary...</p>
</ng-template>
